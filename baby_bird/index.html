<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>Baby Bird</title>
</head>
<script src="jquery-2.1.3.min.js"></script>
<script>
$(function() {
  $(document).on('mousedown touchstart', function() {
    if($('body').hasClass('gg')) {
      // body에서 gg제거하고
      // pos를 50으로 수장
      $('body').removeClass('gg');
      pos = 50;
    } else {
      $('.bird').addClass('up');
      $('.bird').removeClass('down');
    }
  });
  $(document).on('mouseup touchend', function() {
    if($('body').hasClass('gg')) {
    } else {
      $('.bird').addClass('down');
      $('.bird').removeClass('up');
    }
  });

  var pos = 50;

  function update() {
    if($('.bird').hasClass('up')) {
      pos = pos - 1;
    } else {
      pos = pos + 1;
    }
    $('.bird').css('top', pos + '%');

    if(pos === 0 || pos === 100) {
      $('body').addClass('gg');
    }
    
    requestAnimationFrame(update);
  }

  requestAnimationFrame(update);
});


</script>
<style>
.bird {
  position: fixed;
  top: 50%;
  left: 40%;
  background-color: red;
  width: 100px;
  height: 100px;
}
.bird.down {
  transform: rotate(15deg);
}
.bird.up {
  transform: rotate(-15deg);
}

body > .gameover {
  position: fixed;
  top:50%;
  left:50%;
  display: none;
}
body.gg > .gameover {
  display: block;
}
</style>
<body>
  <div class="bird down"></div>
  <div class="gameover">GAME OVER</div>
</body>
</html>
